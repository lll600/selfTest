{"version":3,"sources":["webpack:///./src/pages/search/main.js","webpack:///./src/pages/search/index.vue","webpack:///./src/pages/search/index.vue?d557","webpack:///src/pages/search/index.vue","webpack:///./src/pages/search/index.vue?a02b"],"names":["app","$mount"],"mappings":";;;;;;;;;;AAAA;AACA;;AAEA,IAAMA,MAAM,IAAI,2CAAJ,CAAQ,uDAAR,CAAZ;AACAA,IAAIC,MAAJ,G;;;;;;;;;ACJA;AAAA;AACA;AACA;AACA,yBAAob;AACpb;AACA;AACA;AACA;AACA;AACsP;AACtP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,sDAAsD,IAAI;AACzI,mCAAmC;;AAEnC;AACA,YAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAED;;;;;;;;AC3CA,yC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqDA;;AAEA;AACA;AACA;AADA,GADA;AAIA,MAJA,kBAIA;AACA;AACA,qBADA;AAEA,2EAFA;AAGA,qBAHA;AAIA,iBAJA;AAKA,qBALA;AAMA;AANA;AAQA,GAbA;;AAcA;AACA;AACA;AACA,kCAFA,CAEA;AACA,8CAHA,CAGA;AACA,gCAJA,CAIA;AACA;AACA;AACA,iBADA,EACA;AACA,eAFA,EAEA;AACA;AAAA;AACA;AACA;;AAEA;AACA,0CADA;AAEA;AACA;AACA;AADA;AAGA;AACA,WAPA;AAQA;AAAA;AAAA,WARA;AASA;AAAA;AAAA;AATA;AAWA,OAlBA;AAmBA;AACA;AACA;AACA;AAtBA;AAwBA,GA7CA;AA8CA,SA9CA,qBA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAjEA;;AAkEA;AACA,eADA,uBACA,MADA,EACA,MADA,EACA;AACA;AACA;AACA;AAJA,GAlEA;AAwEA;AACA,kBADA,0BACA,eADA,EACA;AACA;AAEA,KAJA;AAKA,gBALA,0BAKA;AAAA;;AACA,iBACA,GADA,CACA,sBADA,EAEA,IAFA,CAEA;AACA;AACA;AACA,OALA,EAMA,KANA,CAMA,mBANA;AAOA,KAbA;AAcA,oBAdA,8BAcA;AAAA;;AACA,iBACA,GADA,CACA,yBADA,EACA;AACA;AADA,OADA,EAIA,IAJA,CAIA;AACA;AACA;AACA;AACA;AACA,OATA,EAUA,KAVA,CAUA,mBAVA;AAWA,KA1BA;AA2BA,WA3BA,mBA2BA,CA3BA,EA2BA;AACA;AACA;AACA;AACA;AADA;AAGA,OAJA,MAIA;AACA;AACA;AADA;AAGA;AACA,KAtCA;AAuCA,uBAvCA,+BAuCA,IAvCA,EAuCA;AAAA;;AACA;AACA;AADA,SAGA,IAHA,CAGA;AACA;AACA,OALA,EAMA,KANA,CAMA,mBANA;AAOA,KA/CA;AAgDA,gBAhDA,0BAgDA;AAAA;;AACA;AACA,wBADA;AAEA,4CAFA;AAGA;AACA;AADA;AAHA,SAMA,IANA,CAMA;AACA;AACA,OARA;AASA,KA1DA;;AA2DA;AAAA;;AACA,iBACA,GADA,CACA,6BADA,EACA;AACA,iCADA;AAEA;AAFA,OADA,EAKA,IALA,CAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA,WAFA,MAEA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA,OAtBA,EAuBA,KAvBA,CAuBA,mBAvBA;AAwBA;AApFA;AAxEA,G;;;;;;;;ACvDA,0BAA0B,aAAa,0BAA0B;AACjE;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,C","file":"static/js/pages/search/main.js","sourcesContent":["import Vue from 'vue'\r\nimport App from './index'\r\n\r\nconst app = new Vue(App)\r\napp.$mount()\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/main.js","var disposed = false\nfunction injectStyle (ssrContext) {\n  if (disposed) return\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":false,\\\"sourceMap\\\":false}!../../../node_modules/mpvue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1ac67d0b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!px2rpx-loader?{\\\"baseDpr\\\":1,\\\"rpxUnit\\\":0.5}!postcss-loader?{\\\"sourceMap\\\":true}!sass-loader?{\\\"sourceMap\\\":false}!../../../node_modules/mpvue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/mpvue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/mpvue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/mpvue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1ac67d0b\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/mpvue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"src\\\\pages\\\\search\\\\index.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key.substr(0, 2) !== \"__\"})) {console.error(\"named exports are not supported in *.vue files.\")}\nif (Component.options.functional) {console.error(\"[vue-loader] index.vue: functional components are not supported with templates, they should use render functions.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-1ac67d0b\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-1ac67d0b\", Component.options)\n  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/search/index.vue\n// module id = 219\n// module chunks = 7","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":false,\"sourceMap\":false}!./node_modules/mpvue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-1ac67d0b\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/px2rpx-loader?{\"baseDpr\":1,\"rpxUnit\":0.5}!./node_modules/postcss-loader/lib?{\"sourceMap\":true}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":false}!./node_modules/mpvue-loader/lib/selector.js?type=styles&index=0!./src/pages/search/index.vue\n// module id = 220\n// module chunks = 7","<template>\r\n  <div class=\"search\">\r\n    <search-bar @searchKeyWords=\"searchKeyWords\"></search-bar>\r\n\r\n    <article>\r\n      <div v-if=\"showHot\">\r\n        <div class=\"list hotlist\">\r\n          <h3>热搜</h3>\r\n          <p\r\n            class=\"hotName\"\r\n            v-for=\"(hot, index) in hotList\"\r\n            :key=\"index\"\r\n            @click=\"findAll(hot.keyword)\"\r\n          >{{hot.keyword}}</p>\r\n        </div>\r\n        <!-- <div class=\"list\">\r\n          <h3>历史</h3>\r\n          <ul>\r\n            <li v-for=\"(history, index) in historyList\" :key=\"index\">\r\n              <div @click=\"findAll(history.keyword)\">\r\n                <i class=\"icon-bzh_lda\"></i>\r\n                <p>{{history.keyword}}</p>\r\n              </div>\r\n              <i class=\"icon-bzh_tc\" @click=\"clearSinglerHistory(history.KeyID)\"></i>\r\n            </li>\r\n          </ul>\r\n          <div class=\"clear\" @click=\"clearHistory()\">\r\n            <i class=\"icon-shijian\"></i>\r\n            <span>清空历史搜索</span>\r\n          </div>\r\n        </div> -->\r\n      </div>\r\n      <ul>\r\n        <li\r\n          class=\"searchAll\"\r\n          v-for=\"(item, index) in serarchList\"\r\n          :key=\"index\"\r\n          @click=\"findAll(item.dataName)\"\r\n        >\r\n          <p>{{item.dataName}}</p>\r\n          <span>{{item.chioce}}</span>\r\n        </li>\r\n      </ul>\r\n      <div class=\"moreSearch\" v-if=\"searchValue!=''&&serarchList\" @click=\"findAll(searchValue)\">\r\n        <p>查看更多搜索记录</p>\r\n      </div>\r\n      <div class=\"moreSearch\" v-else-if=\"searchValue!=''\">\r\n        <p>暂无搜索记录</p>\r\n      </div>\r\n    </article>\r\n  </div>\r\n</template>\r\n<script>\r\nimport searchBar from \"@/components/searchBar\";\r\n\r\nexport default {\r\n  components: {\r\n    \"search-bar\": searchBar,\r\n  },\r\n  data() {\r\n    return {\r\n      searchValue: \"\",\r\n      userId:wx.getStorageSync('userId')?wx.getStorageSync('userId'):0,\r\n      serarchList: [],\r\n      hotList: [],\r\n      historyList: [],\r\n      showHot: true,\r\n    };\r\n  },\r\n     //转发\r\n  onShareAppMessage: function (tr) {\r\n    let that =this;\r\n    var pages = getCurrentPages() //获取加载的页面\r\n    var currentPage = pages[pages.length-1] //获取当前页面的对象\r\n    var url = currentPage.route //当前页面url\r\n    console.log(url)\r\n      return {\r\n        title: '能答', // 转发后 所显示的title\r\n        path: url, // 相对的路径\r\n        success: (res)=>{    // 成功后要做的事情\r\n          console.log(res.shareTickets[0])\r\n          // console.log\r\n         \r\n          wx.getShareInfo({\r\n            shareTicket: res.shareTickets[0],\r\n            success: (res)=> { \r\n              that.setData({\r\n                isShow:true\r\n              }) \r\n              console.log(that.setData.isShow)\r\n             },\r\n            fail: function (res) { console.log(res) },\r\n            complete: function (res) { console.log(res) }\r\n          })\r\n        },\r\n        fail: function (res) {\r\n          // 分享失败\r\n          console.log(res)\r\n        }\r\n      }\r\n    },\r\n  mounted() {\r\n    // let focusInput = document.getElementById(\"searchInput\").childNodes[2]\r\n    //   .childNodes[1].childNodes[0];\r\n    // //  console.log(focusInput)\r\n    // focusInput.focus();\r\n    // document.getElementById('searchInput').addEventListener('keyup',(e)=>{.focus()\r\n    // //点击go按钮或者搜索按钮查询\r\n    //    if(e.which == 13)\r\n    //    {\r\n    //        alert(11)\r\n    //     // var code = $(\"#queryInput\").val();\r\n    //     // if(code==\"\"||code==null){\r\n    //     // openPopup(\"请输入追溯码/条形码\", 1500);\r\n    //     // return;\r\n    //     }\r\n\r\n    // })\r\n    this.getSearchHistory();\r\n    this.getSearchHot();\r\n  },\r\n  watch: {\r\n    searchValue(curVal, oldVal) {\r\n      this.showHot = curVal == \"\" ? true : false;\r\n      this.getSearch();\r\n    }\r\n  },\r\n  methods: {\r\n    searchKeyWords(searchKeyWords){\r\n      this.searchValue = searchKeyWords\r\n\r\n    },\r\n    getSearchHot() {\r\n      this.$http\r\n        .get(\"/ForumList/SearchHot\")\r\n        .then(response => {\r\n          let res  = response.data\r\n          this.hotList = res.result;\r\n        })\r\n        .catch(error => {});\r\n    },\r\n    getSearchHistory() {\r\n      this.$http\r\n        .get(\"/UserInfo/SearchHistory\", {\r\n          id: this.userId\r\n        })\r\n        .then(response => {\r\n          let res  = response.data\r\n          if (res.status == 1) {\r\n            this.historyList = res.result.reverse();\r\n          }\r\n        })\r\n        .catch(error => {});\r\n    },\r\n    findAll(m) {\r\n        m = m.replace(/\\\\/g,'')\r\n        if(m.trim()){\r\n          wx.redirectTo({\r\n            url: '/pages/searchDetail/main?searchValue='+m\r\n          })\r\n        }else{\r\n          wx.redirectTo({\r\n            url: '/pages/index/main'\r\n          })\r\n        }\r\n    },\r\n    clearSinglerHistory(item) {\r\n      this.$http.delete(\"/UserInfo/DeleteOneHistory\",{\r\n          id: item\r\n      })\r\n        .then(response => {\r\n          this.getSearchHistory();\r\n        })\r\n        .catch(error => {});\r\n    },\r\n    clearHistory() {\r\n      this.$http({\r\n        method: \"delete\",\r\n        url: \"/UserInfo/DeleteSearchHistory\",\r\n        params: {\r\n          id: this.userId\r\n        }\r\n      }).then(response => {\r\n        this.historyList = [];\r\n      });\r\n    },\r\n    getSearch: function() {\r\n      this.$http\r\n        .get(\"/ForumList/FindAll_ComboBox\", {\r\n          keyword: this.searchValue,\r\n          id: this.userId\r\n        })\r\n        .then(res => {\r\n          let response = res.data\r\n          this.serarchList = response.result;\r\n          if (this.serarchList.length > 5) {\r\n            this.serarchList = this.serarchList.splice(0, 5);\r\n          }\r\n          for (let item = 0; item < this.serarchList.length; item++) {\r\n            if (this.serarchList[item].flag == 0) {\r\n              this.serarchList[item].chioce = \"话题\";\r\n            } else if (this.serarchList[item].flag == 1) {\r\n              this.serarchList[item].chioce = \"问题\";\r\n            } else if (this.serarchList[item].flag == 2) {\r\n              this.serarchList[item].chioce = \"文章\";\r\n            } else {\r\n              this.serarchList[item].chioce = \"用户\";\r\n            }\r\n          }\r\n        })\r\n        .catch(error => {});\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n.search article {\r\n  position: absolute;\r\n  top: 120rpx;\r\n  bottom: 0;\r\n  overflow: auto;\r\n  width: 100%;\r\n  background: white;\r\n  padding: 0 0.3rem 0 0.3rem;\r\n  box-sizing: border-box;\r\n  .Internet {\r\n    font-size: 0.4rem;\r\n    top: 200rpx;\r\n    left: 50%;\r\n    margin-left: -100px;\r\n    color: gray;\r\n    position: absolute;\r\n  }\r\n  .moreSearch {\r\n    width: 100%;\r\n    height: 40px;\r\n    font-size: 0.28rem;\r\n    line-height: 40px;\r\n    text-align: center;\r\n    color: #99999a;\r\n  }\r\n  .list {\r\n    width: 100%;\r\n    padding-top: 0.4rem;\r\n    h3 {\r\n      font-size: 0.34rem;\r\n    }\r\n    li {\r\n      width: 100%;\r\n      height: 0.94rem;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n      border-bottom: 0.06rem solid #eaeaea;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding-left: 0;\r\n      margin-top: 0;\r\n      margin-left: 0;\r\n      div {\r\n        width: 80%;\r\n        display: flex;\r\n        align-items: center;\r\n      }\r\n      i {\r\n        font-size: 0.3rem;\r\n      }\r\n      p {\r\n        padding-left: 0.2rem;\r\n        width: 100%;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        white-space: nowrap;\r\n        font-size: 0.3rem;\r\n      }\r\n    }\r\n  }\r\n  .clear {\r\n    height: 0.8rem;\r\n    line-height: 0.8rem;\r\n    i {\r\n        font-size: 0.3rem;\r\n        float: left;\r\n        line-height: 0.8rem;\r\n    }\r\n    span {\r\n      padding-left: 0.2rem;\r\n      font-size: 0.3rem;\r\n    }\r\n  }\r\n  .hotName {\r\n    height: 0.66rem;\r\n    background: #e3e3e3;\r\n    margin: 0.4rem 0.3rem 0 0;\r\n    display: inline-block;\r\n    line-height: 0.6rem;\r\n    border-radius: 0.2rem;\r\n    padding: 0 0.34rem;\r\n    font-size: 0.3rem;\r\n  }\r\n  .searchAll {\r\n    width: 100%;\r\n    height: 0.8rem;\r\n    line-height: 0.8rem;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    p {\r\n      width: 60%;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n      font-size: 0.3rem\r\n    }\r\n    span{\r\n      font-size: 0.3rem\r\n    }\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/search/index.vue?ccc60cb6","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"search\"\n  }, [_c('search-bar', {\n    attrs: {\n      \"eventid\": '0',\n      \"mpcomid\": '0'\n    },\n    on: {\n      \"searchKeyWords\": _vm.searchKeyWords\n    }\n  }), _vm._v(\" \"), _c('article', [(_vm.showHot) ? _c('div', [_c('div', {\n    staticClass: \"list hotlist\"\n  }, [_c('h3', [_vm._v(\"热搜\")]), _vm._v(\" \"), _vm._l((_vm.hotList), function(hot, index) {\n    return _c('p', {\n      key: index,\n      staticClass: \"hotName\",\n      attrs: {\n        \"eventid\": '1-' + index\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.findAll(hot.keyword)\n        }\n      }\n    }, [_vm._v(_vm._s(hot.keyword))])\n  })], 2)]) : _vm._e(), _vm._v(\" \"), _c('ul', _vm._l((_vm.serarchList), function(item, index) {\n    return _c('li', {\n      key: index,\n      staticClass: \"searchAll\",\n      attrs: {\n        \"eventid\": '2-' + index\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.findAll(item.dataName)\n        }\n      }\n    }, [_c('p', [_vm._v(_vm._s(item.dataName))]), _vm._v(\" \"), _c('span', [_vm._v(_vm._s(item.chioce))])], 1)\n  })), _vm._v(\" \"), (_vm.searchValue != '' && _vm.serarchList) ? _c('div', {\n    staticClass: \"moreSearch\",\n    attrs: {\n      \"eventid\": '3'\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.findAll(_vm.searchValue)\n      }\n    }\n  }, [_c('p', [_vm._v(\"查看更多搜索记录\")])], 1) : (_vm.searchValue != '') ? _c('div', {\n    staticClass: \"moreSearch\"\n  }, [_c('p', [_vm._v(\"暂无搜索记录\")])], 1) : _vm._e()], 1)], 1)\n}\nvar staticRenderFns = []\nrender._withStripped = true\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-hot-reload-api\").rerender(\"data-v-1ac67d0b\", esExports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/mpvue-loader/lib/template-compiler?{\"id\":\"data-v-1ac67d0b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/mpvue-loader/lib/selector.js?type=template&index=0!./src/pages/search/index.vue\n// module id = 222\n// module chunks = 7"],"sourceRoot":""}